(()=>{"use strict";const n=()=>{};const e=(n,e,t)=>{return o=void 0,r=void 0,c=function*(){return new Promise(((o,r)=>{var i;const c=document.createElement("script");if(Array.from(document.scripts).some((({src:e})=>e===n)))return o(void 0);Object.assign(c,e),Object.entries(t||{}).forEach((([n,e])=>{c.setAttribute(`data-${n}`,e)})),c.src=n,c.onload=o,c.onerror=r;const a=document.scripts[0];null===(i=null==a?void 0:a.parentNode)||void 0===i||i.insertBefore(c,a)}))},new((i=void 0)||(i=Promise))((function(n,e){function t(n){try{d(c.next(n))}catch(n){e(n)}}function a(n){try{d(c.throw(n))}catch(n){e(n)}}function d(e){var o;e.done?n(e.value):(o=e.value,o instanceof i?o:new i((function(n){n(o)}))).then(t,a)}d((c=c.apply(o,r||[])).next())}));var o,r,i,c},t=n=>{const e=`${n}=([^&]+)`,t=window.location.search.match(new RegExp(e,"i"));return!!t&&decodeURIComponent(t[1])},o=t("imntz_debug"),r=(...n)=>{if(o){const e=(new Date).toLocaleTimeString("he-IL");console.log(`[${e}] %c[Monetization]%c`,"font-weight: bold; color: #314BBF;","color: #333;",...n)}},i=()=>window.location.origin.includes("investing.com")&&!window.location.pathname.includes("/academy/")&&!window.location.pathname.includes("/magazine/");let c;const a=()=>{if(!c)throw new Error("Preset not loaded");return c},d=n=>{return e=void 0,t=void 0,a=function*(){if(c)return c;let e;return yield fetch(n).then((n=>n.json())).then((t=>{r(`Preset loaded from ${n}`),e=t})).catch((()=>{r(`Preset loading failed from ${n}`)})),e?(c=e,c.pubX={enabled:!!window.imntz_pubXAccountId||i(),config:{accountId:window.imntz_pubXAccountId?window.imntz_pubXAccountId:i()?"aba93a3a-0792-49b0-9740-2018808409c4":""}},Promise.resolve(c)):Promise.reject()},new((o=void 0)||(o=Promise))((function(n,r){function i(n){try{d(a.next(n))}catch(n){r(n)}}function c(n){try{d(a.throw(n))}catch(n){r(n)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(n){n(t)}))).then(i,c)}d((a=a.apply(e,t||[])).next())}));var e,t,o,a},s=t("imntz_skip_wrapper");let u;const p=t=>{return o=void 0,r=void 0,c=function*(){var o;if(u)return;if(!t)throw new Error("App is not defined");if(!t.presetUrl)throw new Error("App is not initialized");let r;if(u=t,yield d(t.presetUrl).then((n=>r=n)).catch(n),!r)throw new Error("Preset is not defined");var i;window.__imntz.config={preset:r},e("https://c.amazon-adsystem.com/aax2/apstag.js",{async:!0},{"apstag-pointer":"1"}),r.pubX.enabled&&(null===(o=r.pubX.config)||void 0===o?void 0:o.accountId)&&e((i=r.pubX.config.accountId,"https://cdn.pbxai.com/{accountId}.js".replace("{accountId}",i)),{async:!0}),e((()=>{const n=a();if(!n.prebid)throw new Error("Prebid version is not defined");return"https://monetization.{environment}.invmed.co/prebid/{prebidVersion}/pbjs.min.js".replace("{environment}","prod").replace("{prebidVersion}",n.prebid)})(),{async:!0}),s||e((()=>{const n=a();if(!n.wrapper)throw new Error("Wrapper version is not defined");return"https://monetization.{environment}.invmed.co/wrapper/{wrapperVersion}/wrapper.min.js".replace("{environment}","prod").replace("{wrapperVersion}",n.wrapper)})(),{async:!0})},new((i=void 0)||(i=Promise))((function(n,e){function t(n){try{d(c.next(n))}catch(n){e(n)}}function a(n){try{d(c.throw(n))}catch(n){e(n)}}function d(e){var o;e.done?n(e.value):(o=e.value,o instanceof i?o:new i((function(n){n(o)}))).then(t,a)}d((c=c.apply(o,r||[])).next())}));var o,r,i,c};var f,l;l=function*(){p(window.__imntz).catch(n)},new((f=void 0)||(f=Promise))((function(n,e){function t(n){try{r(l.next(n))}catch(n){e(n)}}function o(n){try{r(l.throw(n))}catch(n){e(n)}}function r(e){var r;e.done?n(e.value):(r=e.value,r instanceof f?r:new f((function(n){n(r)}))).then(t,o)}r((l=l.apply(void 0,[])).next())}))})();