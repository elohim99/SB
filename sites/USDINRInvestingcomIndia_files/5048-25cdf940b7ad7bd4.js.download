(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5048],{55048:function(e,n,t){"use strict";t.d(n,{Z:function(){return I},E:function(){return k}});var a,i,r,o,u=t(75766),s=t(72253),l=t(14932),c=t(24043),p=t(85893),_=t(67294),d=t(19768),m=t.n(d),h=t(46670),f=t(68949),v=t(93967),x=t.n(v),b=t(56635),g=t(31608);(a=r||(r={})).type="_Type",a.date="_Date",a.amount="_amount",a.price="_Price",a.commission="_commission",a.no_data="_addPosition_popup_nameNew",a.pointValue="_point_value",a.leverage="_Leverage",a.buy="_buy",a.sell="_sell";var y=t(86193),N=t(47702),j=t(1771),D=t(43302),C=t.n(D),inputDateValue=function(e){return e?e.toISOString().slice(0,10):void 0},NativeDateInput=function(e){var n=e.value,t=void 0===n?null:n,a=e.onChange,i=e.maxDate,r=void 0===i?null:i,o=e.minDate,u=e.className,l=(0,N._)(e,["value","onChange","maxDate","minDate","className"]),c=t?6e4*new Date(Number(t)).getTimezoneOffset():6e4*new Date().getTimezoneOffset(),d=t?new Date(Number(t)-c):null,m=(0,_.useRef)(null),h=(0,j.F)();return(0,p.jsxs)("div",{className:x()(C().root,u),onClick:function(){m.current&&m.current.click()},children:[h(t),(0,p.jsx)("input",(0,s._)({type:"date",ref:m,onChange:function(e){var n=e.target.valueAsDate;null!==n&&(n=new Date(Number(n)+c)),a(n||null)},value:inputDateValue(d),max:inputDateValue(r),min:inputDateValue(o)},l))]})};(i=o||(o={}))._1="1",i._10="10",i._25="25",i._50="50",i._100="100",i._200="200",i._400="400",i._500="500",i._1000="1000";var w=["BUY","SELL"],k={portfolio_id:"",operation:"BUY",amount:"",comission:"",pair_id:"",posdate:"",price:0,leverage:"1"},reducer=function(e,n){var t=n.field,a=n.value;return(0,l._)((0,s._)({},e),(0,u._)({},t,a))},I=(0,h.Pi)(function(e){var n,t,a,i,u,s=e.portfolios,l=e.data,d=e.changeHandler,h=e.selectedPortfolio,v=e.setSelectedPortfolio,N=e.formatting,j=(0,b.Z)().t,D=(0,c._)((0,_.useState)(""),2),C=D[0],I=D[1],S=(0,c._)((0,_.useReducer)(reducer,k),2),L=S[0],V=S[1],E=(0,c._)((0,_.useState)(new Date),2),P=E[0],F=E[1],z=(0,c._)((0,_.useState)(!0),2),R=z[0],T=z[1],U=(0,g.q)();(0,_.useEffect)(function(){V({field:"portfolio_id",value:h.id})},[h]),(0,_.useEffect)(function(){onDateChange(P)},[P]),(0,_.useEffect)(function(){if(l&&l[0]){T(!1);var e=l[0],n=e.Last.split(",")[0]+e.Last.split(",")[1];I(e.commissionCurrencySymbol),V({field:"price",value:parseFloat(n)}),e.PointValue&&V({field:"pointValue",value:e.PointValue.split("$")[1]})}},[l]),(0,_.useEffect)(function(){d(L)},[L]);var M=(0,_.useRef)(null),parseDateString=function(e){var n=(e=e||new Date).getMonth()+1;return e.getFullYear()+"-"+n+"-"+e.getDate()},onInputChange=function(e){var n=e.target.value;switch(e.target.name){case"portfolio_id":var t,a=(t=n,(0,f.toJS)(s.find(function(e){return e.id===+t})));a&&v(a);break;case"price":n=U.number(e.target.value)||""}V({field:e.target.name,value:n})},onDateChange=function(e){V({field:"posdate",value:parseDateString(e)})};return 0===s.length?(0,p.jsx)("div",{className:m().no_data,children:j(r.no_data)}):R?(0,p.jsx)(y.$,{className:"w-[30px] py-10"}):(0,p.jsxs)("div",{className:m().wrapper,children:[(0,p.jsx)("div",{className:x()("flex w-full",m().top_row),children:(0,p.jsx)("select",{"data-test":"create-position-select",name:"portfolio_id",className:x()("border border-black bg-white p-0 text-xs",m().input),defaultValue:h.id,onChange:function(e){return onInputChange(e)},children:s.map(function(e){return(0,p.jsx)("option",{value:e.id,selected:e.id===h.id,children:e.name},e.hash)})})}),(0,p.jsxs)("div",{className:m().bottom_row,children:[(0,p.jsxs)("div",{className:x()(m().input_box,m().input_box_side),children:[(0,p.jsxs)("label",{className:m().input_label,children:[j(r.type),":"]}),(0,p.jsx)("select",{name:"operation",className:x()("border border-black bg-white p-0 text-xs",m().input,m().height),onChange:function(e){return onInputChange(e)},children:w.map(function(e){return(0,p.jsx)("option",{value:e,children:"BUY"===e?j(r.buy):j(r.sell)},e)})})]}),(0,p.jsxs)("div",{className:x()("relative",m().input_box,m().height),children:[(0,p.jsxs)("label",{className:m().input_label,children:[j(r.date),":"]}),(0,p.jsx)(NativeDateInput,{value:P,onChange:function(e){return F(e)}})]}),(0,p.jsxs)("div",{className:x()(m().input_box,m().input_box_side),children:[(0,p.jsxs)("label",{className:m().input_label,children:[j(r.amount),":"]}),(0,p.jsx)("input",{type:"number",lang:N,className:x()("border border-black bg-white px-1 py-0 text-xs",m().input,m().height),name:"amount",value:L.amount,onChange:onInputChange,"data-test":"portfolio-amount-input"})]}),(0,p.jsxs)("div",{className:x()(m().input_box,m().input_box_price),children:[(0,p.jsxs)("label",{className:m().input_label,children:[j(r.price),":"]}),(0,p.jsx)("input",{type:"string",className:x()("w-full border border-black bg-white px-1 py-0 text-xs",m().input,m().height),name:"price",ref:M,value:(n=L.price,i=(a=U.formatNumberToLocalString(n,2)).length-3,null==M||null===(t=M.current)||void 0===t||t.setSelectionRange(i,i),a),onChange:onInputChange,"data-test":"portfolio-price-input"})]}),(null===(u=l[0])||void 0===u?void 0:u.isCurrencyType)&&(0,p.jsxs)("div",{className:x()(m().input_box),children:[(0,p.jsxs)("label",{className:m().input_label,children:[j(r.leverage),":"]}),(0,p.jsx)("select",{name:"leverage",className:x()(m().input,m().height),onChange:function(e){return onInputChange(e)},children:Object.keys(o).map(function(e){var n=o[e];return(0,p.jsx)("option",{value:n,children:n},e)})})]}),l[0].PointValue&&(0,p.jsxs)("div",{className:x()(m().input_box),children:[(0,p.jsxs)("label",{className:m().input_label,children:[j(r.pointValue),":"]}),(0,p.jsxs)("div",{className:m().currency_container,children:[(0,p.jsx)("div",{className:m().currency_container_currency,dangerouslySetInnerHTML:{__html:C}}),(0,p.jsx)("input",{type:"number",className:x()("px-1 py-0",m().currency_container_input,m().height),name:"pointValue",value:L.pointValue,onChange:onInputChange,"data-test":"portfolio-point-value-input"})]})]}),(0,p.jsxs)("div",{className:m().input_box,children:[(0,p.jsxs)("label",{className:m().input_label,children:[j(r.commission),":"]}),(0,p.jsxs)("div",{className:m().currency_container,children:[(0,p.jsx)("div",{className:m().currency_container_currency,dangerouslySetInnerHTML:{__html:C}}),(0,p.jsx)("input",{type:"number",lang:N,className:x()("px-1 py-0",m().currency_container_input,m().height),name:"comission",value:L.comission,onChange:onInputChange,"data-test":"portfolio-comission-input"})]})]})]})]})})},1771:function(e,n,t){"use strict";t.d(n,{F:function(){return useDatePickerFormatter}});var a=t(49159);function useDatePickerFormatter(){var e=(0,a.Z)().parser,n={month:"2-digit",day:"2-digit",year:"numeric"};return function(t){return t?e.getLocalDateInFormat(t,n):""}}},31608:function(e,n,t){"use strict";t.d(n,{q:function(){return useLocalization}});var a=t(67294),i=t(67582),r=t(62854),useLocalization=function(){var e=(0,i.o)().mobx_easy_id;return(0,a.useMemo)(function(){return(0,r.dU)(e).localesManager},[])}},43302:function(e){e.exports={root:"NativeDateInput_root__lZxBl"}},19768:function(e){e.exports={no_data:"create-position_no_data__l9d4z",wrapper:"create-position_wrapper__hhLDY",top_row:"create-position_top_row__llubH",bottom_row:"create-position_bottom_row__U3sCA",input_label:"create-position_input_label__45_iX",input:"create-position_input__Etdhv",datepicker:"create-position_datepicker__mJany",datepicker_input:"create-position_datepicker_input__FQ4UA",currency_container:"create-position_currency_container__7nz8c",currency_container_input:"create-position_currency_container_input__5pjLz",currency_container_currency:"create-position_currency_container_currency__sDRRE",input_box:"create-position_input_box__ZRnc2"}}}]);